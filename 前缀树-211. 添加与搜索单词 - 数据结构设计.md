
## é¢˜ç›®åœ°å€(211. æ·»åŠ ä¸æœç´¢å•è¯ - æ•°æ®ç»“æ„è®¾è®¡)

[https://leetcode-cn.com/problems/design-add-and-search-words-data-structure/](https://leetcode-cn.com/problems/design-add-and-search-words-data-structure/)

## é¢˜ç›®æè¿°


è¯·ä½ è®¾è®¡ä¸€ä¸ªæ•°æ®ç»“æ„ï¼Œæ”¯æŒ æ·»åŠ æ–°å•è¯ å’Œ æŸ¥æ‰¾å­—ç¬¦ä¸²æ˜¯å¦ä¸ä»»ä½•å…ˆå‰æ·»åŠ çš„å­—ç¬¦ä¸²åŒ¹é… ã€‚

å®ç°è¯å…¸ç±» WordDictionary ï¼š

- WordDictionary() åˆå§‹åŒ–è¯å…¸å¯¹è±¡
- void addWord(word) å°† word æ·»åŠ åˆ°æ•°æ®ç»“æ„ä¸­ï¼Œä¹‹åå¯ä»¥å¯¹å®ƒè¿›è¡ŒåŒ¹é…
- bool search(word) å¦‚æœæ•°æ®ç»“æ„ä¸­å­˜åœ¨å­—ç¬¦ä¸²ä¸Â word åŒ¹é…ï¼Œåˆ™è¿”å› true ï¼›å¦åˆ™ï¼Œè¿”å›Â  false ã€‚word ä¸­å¯èƒ½åŒ…å«ä¸€äº› '.' ï¼Œæ¯ä¸ªÂ . éƒ½å¯ä»¥è¡¨ç¤ºä»»ä½•ä¸€ä¸ªå­—æ¯ã€‚

Â 

ç¤ºä¾‹ï¼š
```
è¾“å…¥ï¼š
["WordDictionary","addWord","addWord","addWord","search","search","search","search"]
[[],["bad"],["dad"],["mad"],["pad"],["bad"],[".ad"],["b.."]]
è¾“å‡ºï¼š
[null,null,null,null,false,true,true,true]

è§£é‡Šï¼š
WordDictionary wordDictionary = new WordDictionary();
wordDictionary.addWord("bad");
wordDictionary.addWord("dad");
wordDictionary.addWord("mad");
wordDictionary.search("pad"); // return False
wordDictionary.search("bad"); // return True
wordDictionary.search(".ad"); // return True
wordDictionary.search("b.."); // return True
```

Â 

æç¤ºï¼š

- 1 <= word.length <= 500
- addWord ä¸­çš„ word ç”±å°å†™è‹±æ–‡å­—æ¯ç»„æˆ
- search ä¸­çš„ word ç”± '.' æˆ–å°å†™è‹±æ–‡å­—æ¯ç»„æˆ
- æœ€å¤šè°ƒç”¨ 50000 æ¬¡ addWord å’Œ search

## æ—¶é—´

- 2021å¹´10æœˆ19æ—¥
- æ¯æ—¥ä¸€é¢˜

## éš¾åº¦

- ä¸­ç­‰

## æ€è·¯

ä¸€é“ Trie çš„è½»åº¦å˜å½¢æ¨¡æ¿é¢˜ï¼Œ Trieçš„åŸºç¡€çŸ¥è¯†å¯ä»¥çœ‹ [è¿™é‡Œ](https://mp.weixin.qq.com/s?__biz=MzU4NDE3MTEyMA==&mid=2247488490&idx=1&sn=db2998cb0e5f08684ee1b6009b974089&chksm=fd9cb8f5caeb31e3f7f67dba981d8d01a24e26c93ead5491edb521c988adc0798d8acb6f9e9d&token=1006889101&lang=zh_CN#rd)ï¼Œé‡Œé¢è¯¦ç»†ä»‹ç»äº†å®ç° Trie çš„ä¸¤ç§æ–¹å¼ã€æ³¨æ„äº‹é¡¹ä»¥åŠ Trie åº”ç”¨é¢ç­‰ç­‰ï¼Œæ˜¯è§£å†³æœ¬é¢˜çš„å‰ç½®èŠå£« ğŸ§€ã€‚

ç®€å•å›é¡¾ä¸€ä¸‹ï¼š

Trie æ ‘ï¼ˆåˆå«ã€Œå‰ç¼€æ ‘ã€æˆ–ã€Œå­—å…¸æ ‘ã€ï¼‰æ˜¯ä¸€ç§ç”¨äºå¿«é€ŸæŸ¥è¯¢ã€ŒæŸä¸ªå­—ç¬¦ä¸²/å­—ç¬¦å‰ç¼€ã€æ˜¯å¦å­˜åœ¨çš„æ•°æ®ç»“æ„ã€‚

å…¶æ ¸å¿ƒæ˜¯ä½¿ç”¨ã€Œè¾¹ã€æ¥ä»£è¡¨æœ‰æ— å­—ç¬¦ï¼Œä½¿ç”¨ã€Œç‚¹ã€æ¥è®°å½•æ˜¯å¦ä¸ºã€Œå•è¯ç»“å°¾ã€ä»¥åŠã€Œå…¶åç»­å­—ç¬¦ä¸²çš„å­—ç¬¦æ˜¯ä»€ä¹ˆã€ã€‚

![](https://pic.leetcode-cn.com/1618369228-slAfrQ-IMG_1659.PNG) 

åˆ°æœ¬é¢˜ï¼Œé¦–å…ˆ addWord æ“ä½œä¸ä¼šå¸¦ . ç¬¦å·ï¼Œå› æ­¤æˆ‘ä»¬é‡‡ç”¨åŸæœ‰çš„ Trie æ’å…¥æ–¹å¼å³å¯ï¼›è€Œåœ¨ search æ“ä½œä¸­ä¼šæœ‰ . ç¬¦å·ï¼Œæˆ‘ä»¬éœ€è¦æšä¸¾æŸä¸ª . æ‰€ä»£æŒ‡çš„å­—æ¯æ˜¯ä»€ä¹ˆï¼Œè¿™éœ€è¦ç»“åˆ DFS æ¥åšã€‚


**Java Code:**

```java

class WordDictionary {
    class Node {
        Node[] tns = new Node[26];
        boolean isWord;
    }

    Node root;
    public WordDictionary() {
        root = new Node();
    }
    
    public void addWord(String word) {
        Node p = root;
        for (int i = 0; i < word.length(); i++) {
            int u = word.charAt(i) - 'a';
            if (p.tns[u] == null) p.tns[u] = new Node();
            p = p.tns[u];
        }
        p.isWord = true;
    }
    
    public boolean search(String word) {
        return dfs(word, root, 0);
    }

    public boolean dfs(String s, Node p, int sIdx) {
        int n = s.length();
        if (sIdx == n) return p.isWord;
        char c = s.charAt(sIdx);
        if (c == '.') {
            for (int j = 0; j < 26; j++) {
                if (p.tns[j] != null && dfs(s, p.tns[j], sIdx + 1)) return true;
            }
            return false;
        } else {
            int u = c - 'a';
            if (p.tns[u] == null) return false;
            return dfs(s, p.tns[u], sIdx + 1);
        }
    }
}

/**
 * Your WordDictionary object will be instantiated and called as such:
 * WordDictionary obj = new WordDictionary();
 * obj.addWord(word);
 * boolean param_2 = obj.search(word);
 */

```


**å¤æ‚åº¦åˆ†æ**

- æ—¶é—´å¤æ‚åº¦ï¼šaddWord æ“ä½œçš„å¤æ‚åº¦ä¸º O(L)ï¼›search æ“ä½œçš„å¤æ‚åº¦ä¸º O(C * L)ï¼Œå…¶ä¸­ C ä¸ºå­—ç¬¦é›†å¤§å°ï¼Œå›ºå®šä¸º 26.
- ç©ºé—´å¤æ‚åº¦ï¼šä»¤ n ä¸ºæ’å…¥å­—ç¬¦ä¸²æ•°é‡ï¼ŒL ä¸ºå­—ç¬¦ä¸²çš„æœ€å¤§é•¿åº¦ï¼Œå¤æ‚åº¦ä¸º O(n * L).


